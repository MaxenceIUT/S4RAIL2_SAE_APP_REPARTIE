<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=PsZy-lBhJtS7Bsfrdz735NHJrOHVm6YhZKMMnp82Jag);.lst-kix_9sg391dtrb5u-3>li:before{content:"-  "}.lst-kix_9sg391dtrb5u-4>li:before{content:"-  "}.lst-kix_9sg391dtrb5u-1>li:before{content:"-  "}.lst-kix_9sg391dtrb5u-5>li:before{content:"-  "}ul.lst-kix_9sg391dtrb5u-5{list-style-type:none}.lst-kix_9sg391dtrb5u-0>li:before{content:"-  "}ul.lst-kix_9sg391dtrb5u-6{list-style-type:none}.lst-kix_9sg391dtrb5u-7>li:before{content:"-  "}.lst-kix_9sg391dtrb5u-8>li:before{content:"-  "}ul.lst-kix_9sg391dtrb5u-3{list-style-type:none}ul.lst-kix_9sg391dtrb5u-4{list-style-type:none}.lst-kix_9sg391dtrb5u-6>li:before{content:"-  "}ul.lst-kix_9sg391dtrb5u-7{list-style-type:none}ul.lst-kix_9sg391dtrb5u-8{list-style-type:none}ul.lst-kix_9sg391dtrb5u-1{list-style-type:none}ul.lst-kix_9sg391dtrb5u-2{list-style-type:none}ul.lst-kix_9sg391dtrb5u-0{list-style-type:none}.lst-kix_9sg391dtrb5u-2>li:before{content:"-  "}ol{margin:0;padding:0}table td,table th{padding:0}.c9{padding-top:0pt;padding-bottom:10pt;line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left;height:20pt}.c21{background-color:#f7f7f8;color:#374151;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c8{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Outfit";font-style:normal}.c32{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Outfit";font-style:normal}.c6{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c25{color:#374151;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c15{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Outfit";font-style:normal}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Outfit";font-style:normal}.c5{background-color:#2b2b2b;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c17{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Outfit";font-style:normal}.c14{padding-top:0pt;padding-bottom:10pt;line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c39{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c19{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c22{background-color:#f7f7f8;font-size:12pt;font-family:"Arial";color:#374151;font-weight:400}.c3{margin-left:18pt;padding-top:3pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c30{text-decoration-skip-ink:none;font-size:14pt;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c10{padding-top:3pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c33{text-decoration:none;vertical-align:baseline;font-size:12pt;font-style:normal}.c34{text-decoration:none;vertical-align:baseline;font-size:14pt;font-style:normal}.c7{text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c27{text-decoration:none;vertical-align:baseline;font-size:20pt;font-style:normal}.c29{font-size:12pt;font-family:"Arial";color:#374151;font-weight:700}.c37{color:#000000;font-weight:400;font-family:"Arial"}.c28{font-family:"Courier New";color:#6a8759;font-weight:400}.c12{color:#000000;font-weight:700;font-family:"Outfit"}.c38{text-decoration:none;vertical-align:baseline;font-style:normal}.c1{font-family:"Courier New";color:#cc7832;font-weight:400}.c18{font-family:"Courier New";color:#ffc66d;font-weight:400}.c35{color:#ff0000;font-weight:700;font-family:"Outfit"}.c16{color:#808080;font-weight:400;font-family:"Courier New"}.c31{font-family:"Courier New";color:#6897bb;font-weight:400}.c0{font-family:"Courier New";color:#a9b7c6;font-weight:400}.c13{color:#000000;font-weight:700;font-family:"Arial"}.c11{font-family:"Courier New";color:#9876aa;font-weight:400}.c26{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c20{color:inherit;text-decoration:inherit}.c23{font-style:italic}.c40{font-size:26pt}.c24{background-color:#2b2b2b}.c36{font-size:16pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Outfit";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Outfit"}p{margin:0;color:#000000;font-size:11pt;font-family:"Outfit"}h1{padding-top:0pt;color:#000000;font-weight:700;font-size:20pt;padding-bottom:10pt;font-family:"Outfit";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Outfit";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:0pt;color:#000000;font-size:11pt;padding-bottom:0pt;font-family:"Outfit";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Outfit";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Outfit";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Outfit";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c26 doc-content"><p class="c4"><span class="c12 c38 c40">SAE - Application web r&eacute;partie</span></p><p class="c4"><span class="c27 c35">Compte rendu</span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><h1 class="c14" id="h.luae4gi0mlvt"><span>Table des mati&egrave;res</span></h1><p class="c6"><span class="c2"></span></p><p class="c10"><span class="c2"><a class="c20" href="#h.luae4gi0mlvt">Table des mati&egrave;res&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</a></span></p><p class="c10"><span class="c7 c12"><a class="c20" href="#h.6tbbpqx8lem5">Informations g&eacute;n&eacute;rales&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</a></span></p><p class="c3"><span class="c2"><a class="c20" href="#h.62j98okyj3ma">Membres du groupe&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</a></span></p><p class="c3"><span class="c2"><a class="c20" href="#h.sozuyudj9vqf">D&eacute;p&ocirc;t Git et Webetu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</a></span></p><p class="c10"><span class="c7 c13"><a class="c20" href="#h.wlg6mscjeoyw">Sch&eacute;ma de l&rsquo;architecture&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</a></span></p><p class="c10"><span class="c7 c13"><a class="c20" href="#h.td501u3hp56e">Travail r&eacute;alis&eacute;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</a></span></p><p class="c10"><span class="c7 c13"><a class="c20" href="#h.q08s6k2h9f4j">Un service RMI qui interroge une base de donn&eacute;es&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</a></span></p><p class="c10"><span class="c7 c13"><a class="c20" href="#h.247cc05ytdw4">Des informations sur la circulation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</a></span></p><p class="c10"><span class="c2"><a class="c20" href="#h.j2s47i9wziyn">Un service qui interroge les donn&eacute;es bloqu&eacute;es&hellip;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</a></span></p><p class="c10"><span class="c7 c13"><a class="c20" href="#h.s2di3mt1rr76">Un proxy qui interroge des services&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</a></span></p><p class="c10"><span class="c7 c13"><a class="c20" href="#h.gct5tu7x0fe5">Travail compl&eacute;mentaire&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</a></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><hr><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><h1 class="c14" id="h.6tbbpqx8lem5"><span class="c12 c27">Informations g&eacute;n&eacute;rales</span></h1><h2 class="c39" id="h.62j98okyj3ma"><span class="c32">Membres du groupe</span></h2><p class="c19"><span class="c17">RENARD Tanguy</span></p><p class="c19"><span class="c17">PEREZ Ioann</span></p><p class="c19"><span class="c17">PETIT Maxence</span></p><p class="c19"><span class="c17">ZHANG Xin</span></p><p class="c6"><span class="c17"></span></p><p class="c6"><span class="c17"></span></p><p class="c6"><span class="c17"></span></p><p class="c6"><span class="c17"></span></p><h2 class="c39" id="h.sozuyudj9vqf"><span class="c32">D&eacute;p&ocirc;t Git et Webetu</span></h2><p class="c19"><span class="c30"><a class="c20" href="https://www.google.com/url?q=https://github.com/MaxenceIUT/S4RAIL2_SAE_APP_REPARTIE&amp;sa=D&amp;source=editors&amp;ust=1687361062476469&amp;usg=AOvVaw3SVMjJyaprOZpVeto01L3x">Acc&eacute;der &agrave; notre d&eacute;p&ocirc;t </a></span><span class="c30"><a class="c20" href="https://www.google.com/url?q=https://github.com/MaxenceIUT/S4RAIL2_SAE_APP_REPARTIE&amp;sa=D&amp;source=editors&amp;ust=1687361062476702&amp;usg=AOvVaw34zUjFFoXjnxHESp9RKn5C">GitHub</a></span></p><p class="c19"><span class="c30"><a class="c20" href="https://www.google.com/url?q=https://webetu.iutnc.univ-lorraine.fr/www/petit354u/.sae/s402/website/&amp;sa=D&amp;source=editors&amp;ust=1687361062476901&amp;usg=AOvVaw1v6L9ABQTBlaPhYOeAhLze">Acc&eacute;der &agrave; notre site h&eacute;berg&eacute; sur Webetu</a></span></p><hr style="page-break-before:always;display:none;"><p class="c6"><span class="c2"></span></p><h1 class="c14" id="h.wlg6mscjeoyw"><span class="c27 c12">Sch&eacute;ma de l&rsquo;architecture</span></h1><p class="c6"><span class="c2"></span></p><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 246.67px;"><img alt="" src="images/image1.png" style="width: 601.70px; height: 246.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c17"></span></p><h1 class="c9" id="h.vga2jq7u0u0t"><span class="c27 c12"></span></h1><h1 class="c9" id="h.w2juymo4ppn0"><span class="c27 c12"></span></h1><h1 class="c9" id="h.cd8nkg1n7dwh"><span class="c27 c12"></span></h1><h1 class="c14" id="h.td501u3hp56e"><span class="c27 c12">Travail r&eacute;alis&eacute; </span></h1><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><h1 class="c14" id="h.q08s6k2h9f4j"><span class="c8">Un service RMI qui interroge une base de donn&eacute;es</span></h1><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 234.67px;"><img alt="" src="images/image9.png" style="width: 601.70px; height: 234.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span class="c2">Dans cette partie nous avons commenc&eacute; par mettre en place une base de donn&eacute;es pour ServiceGoodfood. C&rsquo;est donc la classe ServiceGoodFood qui impl&eacute;mente ServiceGoodFood et qui sera charg&eacute;e d&rsquo;interroger cette BDD. </span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span class="c2">Nous utiliserons donc ce service en temps que variable distante de l&rsquo;annuaire de notre Projet afin que notre Proxy puisse utiliser la m&eacute;thode getRestaurant() afin de cr&eacute;er un endpoint qui rendra les donn&eacute;es accessibles en json par un url. </span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span class="c2">Sur notre programme javascript nous pourrons donc acc&eacute;der &agrave; cette api afin de g&eacute;n&eacute;rer les restaurants correspondant &agrave; la base de donn&eacute;e sur notre carte.</span></p><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 524.27px; height: 279.71px;"><img alt="" src="images/image10.png" style="width: 524.27px; height: 279.71px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span class="c2">Nous pouvons &eacute;galement, sur ces restaurants, effectuer des r&eacute;servations, ce qui va effectuer une requ&ecirc;te sur un endpoint d&eacute;di&eacute; qui va appeler la m&eacute;thode bookTable() de l&rsquo;interface distant afin d&#39;ins&eacute;rer une r&eacute;servation dans la base de donn&eacute;e.</span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><h1 class="c9" id="h.8d4zg4mnl387"><span class="c8"></span></h1><h1 class="c14" id="h.247cc05ytdw4"><span class="c8">Des informations sur la circulation</span></h1><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span>Nous disposons d&rsquo;un fichier </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 108.79px; height: 20.92px;"><img alt="" src="images/image13.png" style="width: 108.79px; height: 20.92px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span class="c2">&nbsp;disposant des m&eacute;thodes &ldquo;getStationsInformation&rdquo; et &ldquo;getStationsStatus&rdquo; faisant un appel fetch sur les donn&eacute;es mise &agrave; dispositions sur le site transport.data.gouv.fr concernant les velibs &agrave; Nancy.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 411.50px; height: 175.67px;"><img alt="" src="images/image4.png" style="width: 411.50px; height: 175.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span class="c2">Celles-ci r&eacute;cup&egrave;rent des donn&eacute;es au format JSON, qui sont ensuite utiliser pour les afficher sur la carte : </span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 201.33px;"><img alt="" src="images/image16.png" style="width: 601.70px; height: 201.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span class="c2">Ces donn&eacute;es &eacute;tant publiques, il n&rsquo;y a pas besoin de passer par un proxy.</span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><h1 class="c14" id="h.j2s47i9wziyn"><span class="c8">Un service qui interroge les donn&eacute;es bloqu&eacute;es&hellip;</span></h1><p class="c6"><span class="c22 c38"></span></p><p class="c19"><span class="c22">Si les donn&eacute;es ne sont pas consult&eacute;es via Java...</span></p><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 523.00px; height: 31.13px;"><img alt="" src="images/image11.png" style="width: 523.00px; height: 31.13px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 526.50px; height: 136.44px;"><img alt="" src="images/image2.png" style="width: 526.50px; height: 136.44px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c15"></span></p><p class="c6"><span class="c15"></span></p><p class="c19"><span class="c15">La solution :</span></p><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 181.50px; height: 246.58px;"><img alt="" src="images/image6.png" style="width: 181.50px; height: 246.58px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c15"></span></p><p class="c19"><span class="c15">Ce service sera ensuite utilis&eacute; par notre proxy pour contourner l&rsquo;exception CORS.</span></p><h1 class="c9" id="h.jplh5ihge1s5"><span class="c8"></span></h1><h1 class="c14" id="h.s2di3mt1rr76"><span class="c8">Un proxy qui interroge des services</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 301.33px;"><img alt="" src="images/image12.png" style="width: 601.70px; height: 301.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></h1><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 520.50px; height: 269.76px;"><img alt="" src="images/image14.png" style="width: 520.50px; height: 269.76px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 526.28px; height: 391.50px;"><img alt="" src="images/image8.png" style="width: 526.28px; height: 391.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span class="c1">package </span><span class="c0">fr.univlorraine</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c1">import </span><span class="c0">com.sun.net.httpserver.HttpsConfigurator</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">import </span><span class="c0">com.sun.net.httpserver.HttpsParameters</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">import </span><span class="c0">com.sun.net.httpserver.HttpsServer</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">import </span><span class="c0">fr.univlorraine.handlers.EtablissementsHandler</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">import </span><span class="c0">fr.univlorraine.handlers.GoodFoodHandler</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">import </span><span class="c0">fr.univlorraine.handlers.ReserverTableHandler</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c1">import </span><span class="c0">javax.net.ssl.*</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">import </span><span class="c0">java.io.FileInputStream</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">import </span><span class="c0">java.io.IOException</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">import </span><span class="c0">java.net.InetSocketAddress</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">import </span><span class="c0">java.security.*</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">import </span><span class="c0">java.security.cert.CertificateException</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c1">public class </span><span class="c7 c0">WebsiteAPI {</span></p><p class="c6 c24"><span class="c7 c0"></span></p><p class="c5"><span class="c1">private final </span><span class="c0">GoodFoodHandler </span><span class="c11">goodFoodHandler</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">private final </span><span class="c0">EtablissementsHandler </span><span class="c11">etablissementsHandler</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c1">private final </span><span class="c0">ReserverTableHandler </span><span class="c11">reserverTableHandler</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c1">public </span><span class="c18">WebsiteAPI</span><span class="c7 c0">(ServiceProxyImpl serviceProxy) {</span></p><p class="c5"><span class="c1">this</span><span class="c0">.</span><span class="c11">goodFoodHandler </span><span class="c0">= </span><span class="c1">new </span><span class="c0">GoodFoodHandler(serviceProxy)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">this</span><span class="c0">.</span><span class="c11">etablissementsHandler </span><span class="c0">= </span><span class="c1">new </span><span class="c0">EtablissementsHandler(serviceProxy)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c1">this</span><span class="c0">.</span><span class="c11">reserverTableHandler </span><span class="c0">= </span><span class="c1">new </span><span class="c0">ReserverTableHandler(serviceProxy)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c7 c0">}</span></p><p class="c6 c24"><span class="c7 c0"></span></p><p class="c5"><span class="c1">public void </span><span class="c18">startAPI</span><span class="c0">() </span><span class="c1">throws </span><span class="c0">IOException</span><span class="c1">, </span><span class="c0">KeyStoreException</span><span class="c1">, </span><span class="c0">NoSuchAlgorithmException</span><span class="c1">, </span><span class="c0">CertificateException</span><span class="c1">, </span><span class="c0">UnrecoverableKeyException</span><span class="c1">, </span><span class="c7 c0">KeyManagementException {</span></p><p class="c5"><span class="c7 c16">// Set up the socket address</span></p><p class="c5"><span class="c0">InetSocketAddress address = </span><span class="c1">new </span><span class="c0">InetSocketAddress(</span><span class="c31">8443</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c7 c16">// Initialise the HTTPS server</span></p><p class="c5"><span class="c0">HttpsServer server = HttpsServer.</span><span class="c0 c23">create</span><span class="c0">(address</span><span class="c1">, </span><span class="c31">0</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">SSLContext sslContext = SSLContext.</span><span class="c0 c23">getInstance</span><span class="c0">(</span><span class="c28">&quot;TLS&quot;</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c7 c16">// Initialise the keystore</span></p><p class="c5"><span class="c1">char</span><span class="c0">[] password = </span><span class="c28">&quot;simulator&quot;</span><span class="c0">.toCharArray()</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">KeyStore ks = KeyStore.</span><span class="c0 c23">getInstance</span><span class="c0">(</span><span class="c28">&quot;JKS&quot;</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">FileInputStream fis = </span><span class="c1">new </span><span class="c0">FileInputStream(</span><span class="c28">&quot;sae.keystore&quot;</span><span class="c0">)</span><span class="c1 c7">;</span></p><p class="c5"><span class="c0">ks.load(fis</span><span class="c1">, </span><span class="c0">password)</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c7 c16">// Set up the key manager factory</span></p><p class="c5"><span class="c0">KeyManagerFactory kmf = KeyManagerFactory.</span><span class="c0 c23">getInstance</span><span class="c0">(</span><span class="c28">&quot;SunX509&quot;</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">kmf.init(ks</span><span class="c1">, </span><span class="c0">password)</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c7 c16">// Set up the trust manager factory</span></p><p class="c5"><span class="c0">TrustManagerFactory tmf = TrustManagerFactory.</span><span class="c0 c23">getInstance</span><span class="c0">(</span><span class="c28">&quot;SunX509&quot;</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">tmf.init(ks)</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c7 c16">// Set up the HTTPS context and parameters</span></p><p class="c5"><span class="c0">sslContext.init(kmf.getKeyManagers()</span><span class="c1">, </span><span class="c0">tmf.getTrustManagers()</span><span class="c1">, null</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">server.setHttpsConfigurator(</span><span class="c1">new </span><span class="c7 c0">HttpsConfigurator(sslContext) {</span></p><p class="c5"><span class="c1">public void </span><span class="c18">configure</span><span class="c7 c0">(HttpsParameters params) {</span></p><p class="c5"><span class="c1">try </span><span class="c7 c0">{</span></p><p class="c5"><span class="c7 c16">// Initialise the SSL context</span></p><p class="c5"><span class="c0">SSLContext c = SSLContext.</span><span class="c0 c23">getDefault</span><span class="c0">()</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">SSLEngine engine = c.createSSLEngine()</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">params.setNeedClientAuth(</span><span class="c1">false</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">params.setCipherSuites(engine.getEnabledCipherSuites())</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">params.setProtocols(engine.getEnabledProtocols())</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c7 c16">// Get the default parameters</span></p><p class="c5"><span class="c0">SSLParameters defaultSSLParameters = c.getDefaultSSLParameters()</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">params.setSSLParameters(defaultSSLParameters)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">} </span><span class="c1">catch </span><span class="c7 c0">(Exception ex) {</span></p><p class="c5"><span class="c0">ex.printStackTrace()</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">System.</span><span class="c11 c23">out</span><span class="c0">.println(</span><span class="c28">&quot;Failed to create HTTPS port&quot;</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c7 c0">}</span></p><p class="c5"><span class="c7 c0">}</span></p><p class="c5"><span class="c0">})</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">server.createContext(</span><span class="c28">&quot;/api/goodfood/restaurant&quot;</span><span class="c1">, this</span><span class="c0">.</span><span class="c11">goodFoodHandler</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">server.createContext(</span><span class="c28">&quot;/api/etablissements&quot;</span><span class="c1">, this</span><span class="c0">.</span><span class="c11">etablissementsHandler</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c5"><span class="c0">server.createContext(</span><span class="c28">&quot;/api/goodfood/reserver&quot;</span><span class="c1">, this</span><span class="c0">.</span><span class="c11">reserverTableHandler</span><span class="c0">)</span><span class="c7 c1">;</span></p><p class="c6 c24"><span class="c7 c1"></span></p><p class="c5"><span class="c0">server.start()</span><span class="c7 c1">;</span></p><p class="c5"><span class="c7 c0">}</span></p><p class="c6 c24"><span class="c7 c0"></span></p><p class="c5"><span class="c7 c0">}</span></p><p class="c6"><span class="c2"></span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span class="c2">Ce service est un serveur (classe HttpsServer) faisant l&rsquo;interm&eacute;diaire entre &nbsp;l&rsquo;application et les donn&eacute;es bloqu&eacute;es par le CORS. Chaque service dispens&eacute; est li&eacute; &agrave; un endpoint permettant d&rsquo;utiliser un fetch et r&eacute;cup&eacute;rer les donn&eacute;es li&eacute;es.</span></p><p class="c6"><span class="c2"></span></p><p class="c19"><span>Ce serveur dispose d&rsquo;un certificat SSL &ldquo;factice&rdquo; permettant de prouver qu&rsquo;il est un site de confiance et peut acc&eacute;der &agrave; certaines donn&eacute;es qui pourraient &ecirc;tre bloqu&eacute;es. </span></p><h1 class="c9" id="h.x4lvprqhdwf2"><span class="c8"></span></h1><h1 class="c9" id="h.kjkrfdy83l2o"><span class="c8"></span></h1><h1 class="c14" id="h.gct5tu7x0fe5"><span class="c8">Travail compl&eacute;mentaire</span></h1><p class="c19"><span class="c36">M&eacute;t&eacute;o : </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 252.00px;"><img alt="" src="images/image15.png" style="width: 601.70px; height: 252.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 240.00px;"><img alt="" src="images/image3.png" style="width: 601.70px; height: 240.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c21"></span></p><p class="c19"><span class="c25">D&#39;abord, nous r&eacute;cup&eacute;rons les donn&eacute;es JSON en utilisant la m&eacute;thode fetch.</span></p><p class="c19"><span class="c25">Ensuite, nous obtenons l&#39;heure actuelle et la comparons avec les donn&eacute;es JSON, en gardant les heures futures.</span></p><p class="c6"><span class="c21"></span></p><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 219.00px; height: 33.00px;"><img alt="" src="images/image7.png" style="width: 219.00px; height: 33.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c21"></span></p><p class="c19"><span class="c21">Nous gardons uniquement les 8 premiers &eacute;l&eacute;ments dans le tableau.</span></p><p class="c6"><span class="c21"></span></p><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 177.33px;"><img alt="" src="images/image17.png" style="width: 601.70px; height: 177.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 285.33px;"><img alt="" src="images/image5.png" style="width: 601.70px; height: 285.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c21"></span></p><p class="c19"><span class="c29">Nous ajoutons un listener d&#39;&eacute;v&eacute;nements pour mettre &agrave; jour la page web et d&eacute;finissons le premier &eacute;l&eacute;ment du tableau comme objet &#39;this&#39; et ex&eacute;cutons l&#39;&eacute;v&eacute;nement &#39;click&#39;.</span></p><p class="c6"><span class="c15"></span></p><p class="c6"><span class="c15"></span></p><p class="c6"><span class="c15"></span></p><p class="c6"><span class="c12 c34"></span></p><p class="c6"><span class="c15"></span></p><p class="c6"><span class="c15"></span></p><div><p class="c6"><span class="c2"></span></p></div></body></html>